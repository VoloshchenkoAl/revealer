{"version":3,"file":"revealer.js","sources":["../src/index.ts"],"sourcesContent":["function revealer(actionBtn: HTMLElement, revealBlock: HTMLElement): void {\n  const actionBtnEl: HTMLElement = actionBtn;\n  const revealBlockEl: HTMLElement = revealBlock;\n  const initialRadius = 0;\n\n  let isMenuOpen = false;\n  let reqId: number = null;\n  let targetRadius: number = initialRadius;\n  let elementRadius: number = targetRadius;\n\n  const getMinimumRadius = (): number => {\n    const { innerHeight, innerWidth } = window;\n\n    return Math.sqrt(innerHeight ** 2 + innerWidth ** 2);\n  };\n\n  const animationStop = (): void => {\n    cancelAnimationFrame(reqId);\n    reqId = null;\n  };\n\n  const getCirclePosition = () => {\n    const { top, left, height, width } = actionBtnEl.getBoundingClientRect();\n    const leftPosition = `${left + width / 2}px`;\n    const topPosition = `${top + height / 2}px`;\n\n    return { left: leftPosition, top: topPosition };\n  };\n\n  const setCirclePosition = () => {\n    const { left, top } = getCirclePosition();\n    const circlePosition = `${left} ${top}`;\n\n    // eslint-disable-next-line no-param-reassign\n    revealBlock.style.clipPath = `circle(var(--radius) at ${circlePosition})`;\n  };\n\n  const initRevealBlock = (): void => {\n    revealBlockEl.style.setProperty('--radius', `${initialRadius}px`);\n    setCirclePosition();\n    revealBlockEl.setAttribute('data-active', 'true');\n  };\n\n  const animationStart = (): void => {\n    elementRadius += (targetRadius - elementRadius) * 0.08;\n    revealBlockEl.style.setProperty('--radius', `${elementRadius}px`);\n\n    reqId = requestAnimationFrame(animationStart);\n\n    // some bug with small black point\n    const isStopAnimation: boolean = isMenuOpen\n      ? elementRadius > targetRadius\n      : Math.round(elementRadius) === Math.round(targetRadius);\n\n    if (isStopAnimation) {\n      animationStop();\n    }\n  };\n\n  const onReveal = (): void => {\n    isMenuOpen = !isMenuOpen;\n    actionBtnEl.setAttribute('data-open', `${isMenuOpen}`);\n    targetRadius = isMenuOpen ? getMinimumRadius() : initialRadius;\n    animationStart();\n  };\n\n  initRevealBlock();\n  actionBtnEl.addEventListener('click', onReveal);\n}\n\nexport default revealer;\n"],"names":[],"mappings":";;;IAAA,SAAS,QAAQ,CAAC,SAAsB,EAAE,WAAwB;QAChE,IAAM,WAAW,GAAgB,SAAS,CAAC;QAC3C,IAAM,aAAa,GAAgB,WAAW,CAAC;QAC/C,IAAM,aAAa,GAAG,CAAC,CAAC;QAExB,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,KAAK,GAAW,IAAI,CAAC;QACzB,IAAI,YAAY,GAAW,aAAa,CAAC;QACzC,IAAI,aAAa,GAAW,YAAY,CAAC;QAEzC,IAAM,gBAAgB,GAAG;YACf,IAAA,WAAW,GAAiB,MAAM,YAAvB,EAAE,UAAU,GAAK,MAAM,WAAX,CAAY;YAE3C,OAAO,IAAI,CAAC,IAAI,CAAC,SAAA,WAAW,EAAI,CAAC,CAAA,GAAG,SAAA,UAAU,EAAI,CAAC,CAAA,CAAC,CAAC;SACtD,CAAC;QAEF,IAAM,aAAa,GAAG;YACpB,oBAAoB,CAAC,KAAK,CAAC,CAAC;YAC5B,KAAK,GAAG,IAAI,CAAC;SACd,CAAC;QAEF,IAAM,iBAAiB,GAAG;YAClB,IAAA,KAA+B,WAAW,CAAC,qBAAqB,EAAE,EAAhE,GAAG,SAAA,EAAE,IAAI,UAAA,EAAE,MAAM,YAAA,EAAE,KAAK,WAAwC,CAAC;YACzE,IAAM,YAAY,GAAM,IAAI,GAAG,KAAK,GAAG,CAAC,OAAI,CAAC;YAC7C,IAAM,WAAW,GAAM,GAAG,GAAG,MAAM,GAAG,CAAC,OAAI,CAAC;YAE5C,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,EAAE,WAAW,EAAE,CAAC;SACjD,CAAC;QAEF,IAAM,iBAAiB,GAAG;YAClB,IAAA,KAAgB,iBAAiB,EAAE,EAAjC,IAAI,UAAA,EAAE,GAAG,SAAwB,CAAC;YAC1C,IAAM,cAAc,GAAM,IAAI,SAAI,GAAK,CAAC;;YAGxC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,6BAA2B,cAAc,MAAG,CAAC;SAC3E,CAAC;QAEF,IAAM,eAAe,GAAG;YACtB,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAK,aAAa,OAAI,CAAC,CAAC;YAClE,iBAAiB,EAAE,CAAC;YACpB,aAAa,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SACnD,CAAC;QAEF,IAAM,cAAc,GAAG;YACrB,aAAa,IAAI,CAAC,YAAY,GAAG,aAAa,IAAI,IAAI,CAAC;YACvD,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAK,aAAa,OAAI,CAAC,CAAC;YAElE,KAAK,GAAG,qBAAqB,CAAC,cAAc,CAAC,CAAC;;YAG9C,IAAM,eAAe,GAAY,UAAU;kBACvC,aAAa,GAAG,YAAY;kBAC5B,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YAE3D,IAAI,eAAe,EAAE;gBACnB,aAAa,EAAE,CAAC;aACjB;SACF,CAAC;QAEF,IAAM,QAAQ,GAAG;YACf,UAAU,GAAG,CAAC,UAAU,CAAC;YACzB,WAAW,CAAC,YAAY,CAAC,WAAW,EAAE,KAAG,UAAY,CAAC,CAAC;YACvD,YAAY,GAAG,UAAU,GAAG,gBAAgB,EAAE,GAAG,aAAa,CAAC;YAC/D,cAAc,EAAE,CAAC;SAClB,CAAC;QAEF,eAAe,EAAE,CAAC;QAClB,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IAClD;;;;;;;;"}