{"version":3,"file":"revealer.js","sources":["../src/index.ts"],"sourcesContent":["function revealer(actionBtn: HTMLElement, revealBlock: HTMLElement): void {\n    const actionBtnEl: HTMLElement = actionBtn;\n    const revealBlockEl: HTMLElement = revealBlock;\n    const initialRedius: number = 0;\n\n    let isMenuOpen: boolean = false;\n    let reqId: number = null;\n    let targetRadius: number = initialRedius;\n    let elementRadius: number = targetRadius;\n\n    const getCirclePosition = () => {\n        const { top, left, height, width } = actionBtnEl.getBoundingClientRect();\n        const leftPosition = `${left + width / 2}px`;\n        const topPosition = `${top + height / 2}px`;\n\n        return { left: leftPosition, top: topPosition };\n    };\n\n    const setCirclePosition = () => {\n        const { left, top } = getCirclePosition();\n        const circlePosition = `${left} ${top}`;\n\n        revealBlock.style.clipPath = `circle(var(--radius) at ${circlePosition})`;\n    };\n\n    const initRevealBlock = (): void => {\n        revealBlockEl.style.setProperty('--radius', `${initialRedius}px`);\n        setCirclePosition();\n        revealBlockEl.setAttribute('data-active', 'true');\n    };\n\n    const getTargetRadius = (inMenuOpen: boolean): number => {\n        return inMenuOpen ? getMinimumRadius() : initialRedius;\n    };\n\n    const getMinimumRadius = (): number => {\n        const { innerHeight, innerWidth } = window;\n\n        return Math.sqrt(innerHeight ** 2 + innerWidth ** 2);\n    };\n\n    const animationStart = (): void => {\n        elementRadius += (targetRadius - elementRadius) * 0.08;\n        revealBlockEl.style.setProperty('--radius', `${elementRadius}px`);\n\n        reqId = requestAnimationFrame(animationStart);\n\n        // some bug with smal black point\n        const isStopAnimation: boolean =\n            isMenuOpen ? elementRadius > targetRadius : Math.round(elementRadius) === Math.round(targetRadius);\n\n        if (isStopAnimation) {\n            animationStop();\n        }\n    };\n\n    const animationStop = (): void => {\n        cancelAnimationFrame(reqId);\n        reqId = null;\n    };\n\n    const onReveal = (): void => {\n        isMenuOpen = !isMenuOpen;\n        actionBtnEl.setAttribute('data-open', `${isMenuOpen}`);\n        targetRadius = getTargetRadius(isMenuOpen);\n        animationStart();\n    };\n\n    initRevealBlock();\n    actionBtnEl.addEventListener('click', onReveal);\n}\n\nexport default revealer;\n"],"names":[],"mappings":";;;IAAA,SAAS,QAAQ,CAAC,SAAsB,EAAE,WAAwB;QAC9D,IAAM,WAAW,GAAgB,SAAS,CAAC;QAC3C,IAAM,aAAa,GAAgB,WAAW,CAAC;QAC/C,IAAM,aAAa,GAAW,CAAC,CAAC;QAEhC,IAAI,UAAU,GAAY,KAAK,CAAC;QAChC,IAAI,KAAK,GAAW,IAAI,CAAC;QACzB,IAAI,YAAY,GAAW,aAAa,CAAC;QACzC,IAAI,aAAa,GAAW,YAAY,CAAC;QAEzC,IAAM,iBAAiB,GAAG;YAChB,IAAA,wCAAkE,EAAhE,YAAG,EAAE,cAAI,EAAE,kBAAM,EAAE,gBAA6C,CAAC;YACzE,IAAM,YAAY,GAAM,IAAI,GAAG,KAAK,GAAG,CAAC,OAAI,CAAC;YAC7C,IAAM,WAAW,GAAM,GAAG,GAAG,MAAM,GAAG,CAAC,OAAI,CAAC;YAE5C,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,EAAE,WAAW,EAAE,CAAC;SACnD,CAAC;QAEF,IAAM,iBAAiB,GAAG;YAChB,IAAA,wBAAmC,EAAjC,cAAI,EAAE,YAA2B,CAAC;YAC1C,IAAM,cAAc,GAAM,IAAI,SAAI,GAAK,CAAC;YAExC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,6BAA2B,cAAc,MAAG,CAAC;SAC7E,CAAC;QAEF,IAAM,eAAe,GAAG;YACpB,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAK,aAAa,OAAI,CAAC,CAAC;YAClE,iBAAiB,EAAE,CAAC;YACpB,aAAa,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SACrD,CAAC;QAEF,IAAM,eAAe,GAAG,UAAC,UAAmB;YACxC,OAAO,UAAU,GAAG,gBAAgB,EAAE,GAAG,aAAa,CAAC;SAC1D,CAAC;QAEF,IAAM,gBAAgB,GAAG;YACb,IAAA,gCAAW,EAAE,8BAAU,CAAY;YAE3C,OAAO,IAAI,CAAC,IAAI,CAAC,SAAA,WAAW,EAAI,CAAC,CAAA,GAAG,SAAA,UAAU,EAAI,CAAC,CAAA,CAAC,CAAC;SACxD,CAAC;QAEF,IAAM,cAAc,GAAG;YACnB,aAAa,IAAI,CAAC,YAAY,GAAG,aAAa,IAAI,IAAI,CAAC;YACvD,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAK,aAAa,OAAI,CAAC,CAAC;YAElE,KAAK,GAAG,qBAAqB,CAAC,cAAc,CAAC,CAAC;;YAG9C,IAAM,eAAe,GACjB,UAAU,GAAG,aAAa,GAAG,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YAEvG,IAAI,eAAe,EAAE;gBACjB,aAAa,EAAE,CAAC;aACnB;SACJ,CAAC;QAEF,IAAM,aAAa,GAAG;YAClB,oBAAoB,CAAC,KAAK,CAAC,CAAC;YAC5B,KAAK,GAAG,IAAI,CAAC;SAChB,CAAC;QAEF,IAAM,QAAQ,GAAG;YACb,UAAU,GAAG,CAAC,UAAU,CAAC;YACzB,WAAW,CAAC,YAAY,CAAC,WAAW,EAAE,KAAG,UAAY,CAAC,CAAC;YACvD,YAAY,GAAG,eAAe,CAAC,UAAU,CAAC,CAAC;YAC3C,cAAc,EAAE,CAAC;SACpB,CAAC;QAEF,eAAe,EAAE,CAAC;QAClB,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IACpD,CAAC;AAED;;;;;;;;"}